# ARC Consensus Configuration
# ============================
# Defines voting rules, thresholds, and conflict resolution strategies.

# === VOTING CONFIGURATION ===

voting:
  # Consensus threshold (0.0-1.0)
  # Minimum weighted score required for consensus
  # 0.66 = 66% agreement needed
  consensus_threshold: 0.66

  # Minimum number of votes required for a valid decision
  min_votes_required: 2

  # Weight votes by confidence scores
  # If true, high-confidence votes count more
  enable_confidence_weighting: true

  # Allow agents to abstain from voting
  allow_abstentions: true

# === CONFLICT RESOLUTION ===

conflict_resolution:
  # Default strategy when consensus not reached
  # Options: majority_rule, weighted_majority, supervisor_override,
  #          highest_confidence, conservative, progressive, mediation
  default_strategy: conservative

  # Supervisor override threshold
  # Minimum confidence for supervisor to override consensus (0.0-1.0)
  supervisor_override_threshold: 0.9

  # Enable supervisor veto power
  # If true, supervisor can veto any decision
  enable_supervisor_veto: true

  # Enable director override
  # If true, director can override on strategic grounds
  enable_director_override: true

# === DECISION RULES ===

decision_rules:
  # Threshold for automatic approval (weighted score >= this value)
  approve_threshold: 0.66

  # Threshold for automatic rejection (weighted score <= this value)
  reject_threshold: -0.66

  # Prioritize revision suggestions over outright rejection
  # If true and any agent suggests revisions, decision is "revise"
  revision_priority: true

  # Require unanimous approval for high-risk experiments
  require_unanimous_for_high_risk: false

# === AGENT-SPECIFIC RULES ===

agent_rules:
  # Supervisor veto power (can override any decision)
  supervisor:
    veto_power: true
    minimum_confidence_for_veto: 0.9

  # Director strategic override (can override on strategic grounds)
  director:
    strategic_override: true
    minimum_confidence_for_override: 0.85

  # Critic blocking power (single Critic reject = automatic block)
  critic:
    single_reject_blocks: false
    blocking_confidence_threshold: 0.95

# === CONTROVERSY DETECTION ===

controversy:
  # Entropy threshold for detecting controversial votes
  # Higher entropy = more disagreement
  # Values: 0.0 (unanimous) to ~1.58 (maximum disagreement)
  entropy_threshold: 1.0

  # Agreement rate threshold (votes in agreement / total votes)
  # Below this rate = controversial
  agreement_rate_threshold: 0.6

  # Action when controversy detected
  # Options: escalate_to_supervisor, require_mediation, automatic_revision
  controversy_action: escalate_to_supervisor

# === VOTING WEIGHT NOTES ===
#
# Voting weights are defined per-agent in agents.yaml
# Typical weights:
# - Supervisor: 3.0 (highest, veto power)
# - Critics: 2.0 (strong safety voice)
# - Director: 2.0 (strategic authority)
# - Architects: 1.5 (proposal expertise)
# - Others: 1.0-1.2 (standard vote)
#
# === CONFLICT RESOLUTION STRATEGY DESCRIPTIONS ===
#
# majority_rule: Simple majority (count votes, ignore weights)
# weighted_majority: Use voting weights (default)
# supervisor_override: Supervisor makes final decision
# highest_confidence: Trust most confident voter
# conservative: Reject if unclear (safe default)
# progressive: Approve if no strong objections
# mediation: Attempt to find compromise via revisions
